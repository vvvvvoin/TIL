### HTTP 요청 흐름 

### REST API

- rest api는 rest속성을 이용한 서비스 api이다
- HTTP URI로 자원을 명시하고, HTTP Method(GET, POST, PUT, HEAD)를 이용하여 서버의 자원을 CRUD한다.
- 그리고 자원을 요청한 클라이언트는 주로 JSON, XML형태로 데이터를 받게 된다.

#### URI? URL?

- URI : 통합 자원 식별자
- URL : 통합 자원 위치
- URI가 URL의 상위 개념이다.
- 자원의 위치를 구분하기 위해 존재하는 개념들이다.
- `http://221.163.122.70:8080/img/image.gif` 는  `image.gif` 라는 자원의 URI이면서 URL이 된다.
- 반면 `http://221.163.122.70:8080/home.html?id=az`는 해당 자원에 접근하기 위한 `query String`인 `id`값을 명시하고 있는데 이는 URI이다.
- 즉 어떤 자원에 접근하기 위해서는 `id`라는 식별자가 필요하기 때문에 URI라고 표현한다.

#### HTTP Method

- GET
  - 서버에서 자원을 보내도록 요청하는데 사용됨
- HEAD
  - GET과 같지만 서버에서 body를 return 하지 않음
  - 데이터를 받지 않고 찾기만 원할때
- PUT
  - 서버에 문서를 쓸때 사용
  - 서버는 client의 body를 확인
- POST
  - 서버에 input data를 보내기 위함
  - 주로 HTML form에 많이 사용됨
- DELETE
  - 요청 자원을 삭제하도록 요청

- OPTION
  - 어떤 HTTP Method가 가능한지 알아보기 위함

### TCP, UDP

- tcp와 ucp는 4계층 전송 프로토콜이다.
- 두 프로토콜의 차이점은 연결과 신뢰도에 있다
- TCP는 3-way handshaking을 통해 connection을 형성한 뒤 패킷을 송수신한다.
- 반변 UDP는 연결 설정없이 바로 전송이 가능하지만 패킷손실과 패킷 순서가 바뀌어 수신될 수 있다.

### 세션과 쿠키?

- 세션과 쿠키는 HTTP 프로토콜에서 나타나는 비연결성, 상태정보를 저장하지 않는 특징을 보완하기 위해 나온 개념이다.
- 사용자가 요청을 보내고 서버로부터 응답을 받으면 서로간에 연결이 끊기는 비연결성 때문에 상태정보가 저장되지 않는다.
- 이때문에 로그인정보가 필요하면 다시 로그인해서 요청을 보내야 한다.
- 이러한 문제를 해결하는 것이 세션과 쿠키이다.
- 쿠키는 key와 value의 형태로 상태정보를 사용자의 브라우저, 로컬에 저장한다.
- 요청시 쿠키값을 담아 요청한다.
- 세션은 상태정보를 서버에 저장한다.
- 보안성
  - 보안성에서는 세션이 유리하다.
  - 왜냐하면 서버에 저장되고 쿠키는 로컬서버에 저장되기 때문
- 사용도
  - 세션 : 로그인 정보 등
  - 쿠키 : 오늘 그만보기, 로그인정보 저장 등

### TCP

- TCP는 전송계층에서 사용하는 프로토콜로써 클라이언트와 서버간에 신뢰성을 중시하는 프로토콜입니다.
- TCP의 큰 특징은 3-hand-shaking방식으로 신뢰성 있는 데이터를 송수신할 수 있게 한다.
  - client -> server : syc
  - server -> cline : ack + sync
  - client -> server : ack

### 프록시 서버

- 클라이언트가 프록시 서버를 통해서 다른 네트워크에 간접적으로 접근하는 것을 의미한다.
- 프록시 서버는 요청된 내용을 캐시에 저장하여 다음에 오는 요청에 캐시에 저장된 내용을 제공함으로써 전송시간을 줄일 수 있다.

- 그렇다면 프록시 서버에 캐시내용은 반영하면 실제 서버의 데이터가 바뀔때도 캐시를 전송하나?
  - 아니다. 실제 서버에서 응답할 때 캐시 만료기한을 설정해두어야 한다.
  - 프록시서버여도 최초에는 실제 서버에 요청을 보내야 한다. 
  - 이때 서버에서 캐시 만료기한을 설정해 프록시 서버에 보낸다.
  - 그리고 사용자 요청에 만료기한이 지나면 실제 서버로 요청할 것이다.

### HTTP가 무엇인가?

- `Hyper Text Transfer Protocol`로 인터넷에서 데이터를 주고 받을 수 있는 응답과 요청으로 이루어진 7계층 프로토콜을 의미한다.

### HTTP는 비연결성? 연결성? 프로토콜

- 비연결성프로토콜이다.
- 요청에 대한 응답이 전달되면 연결이 끊긴다.
- 비연결성인 이유
  - 초기 HTTP가 고려되었을 때에 Hyper Text를 주고받을 용도로만 만들어졌기 때문이다.

### 비연결성 프로토콜을 해결하는 방법

- 세션콰 쿠키를 주로 사용한다.
- HTML5에서는 `Session Storage`, `Local Storage`가 존재한다.
- Session Storage
  - 세션이 유지되고 있을 때 까지는 브라우저에 저장 후 세션이 끊기면 자동으로 없어짐
- Local Storage
  - 로컬 스토리지는 영구적으로 관련 정보를 저장

### HTTP, HTTPS

- HTTP는 일반적인 데이터를 전송하는 프로토콜이기 때문에 민감정보를 제3자에 의해 조회될 수 있다.
- 이러한 문제를 해결하는 것이 HTTPS로써 암호화 기능을 추가한 프로토콜이다.
- HTTPS는 공개키를 갖는 인증서를 발급하여 사용자가 메세지에 해당 공개키로 암호화하여 전송하도록 한다.
- 그리고 해당 공개키를 발급한 서버에는 비밀키로 해당 메세지를 해독한다.

### HTTP 흐름

- 브라우저에서 URL에 적힌 값을 파싱하여, HTTP 요청 메세지를 만든다.
- 이후 해당 메세지를 전송하기 위해 OS에 요청한다.
- OS는 DNS서버를 조회하여 해당 HOST의 IP를 찾고 메세지를 전달하게 된다.