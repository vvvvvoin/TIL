# 메모리 관리

## 메모리 계측구조

- block
  - 보조기억장치와 주 기억장치 사이의 데이터 전송단위
  - size 1 ~ 4 KB
- word
  - 주기억장치와 레지스터 사이의 데이터 전송 단위
  - size 16 ~ 64 bits

## 어드레스 바인딩

- 프로그램의 논리 주소를 실제 메모리의 물리 주소로 매핑하는 작업

## 다이나믹 로딩

- 모든 루틴을 교체 가능한 형태로 디스크에 저장
- 실제 호출전까지 루틴을 적재하지 않음
- 장점
  - 메모리 공간의 효율적 사용

## 스와핑

- 프로세서 할딩이 끝나고 수행 완료 된 프로세스는 스왑 디바이스로 보냄
- 새롭게 시작하는 프로세스는 메모리에 적재

##  Continuous memory allocation 연속할당

- 프로세스를 하나의 연속된 메모리 공간에 할당하는 정책
- 메모리 구성 정책
  - 메모리에 동시에 올라갈 수 있는 프로세스 수
  - 각 프로세스에게 할당되는 메모리 공간 크기

### uni programming

- 하나의 프로세스만 메모리 상에 존재
- 가장 간단한 메모리 관리 기법
- 문제점
  - 프로그램의 크기 > 메모리 크기
- 해결법 overlay structure
  - 메모리에 현재 필요한 영역만 적재
  - 사용자가 프로그램 흐름 및 자료구조를 모두 알고 있어야함

- 문제점
  - 메모리 영억중에 커널영억 보호
- 해결방법
  - 경계 레지스터 사용
- 문제점
  - 자원, 시스템의 활용도가 낮음
- 해결법
  - multi programming

### multi programming

#### fixed partition multiprogramming

- 메모리 공간을 고정된 크기로 분할
- 각 프로세스는 하나의 파티션에 적재
- 파티션의 수가 multiprogramming degree와 같다

- 각 피티션과 커널 및 사용자 영역 보호가 필요함

##### fragmentation 단편화

  - internal fragmentation
      - 내부단편화
      - 파티션크기 > 프로세스크기
        - 메모리 낭비

- external fragmentation
  - 외부 단편화
  - 남은 메모리크기 > 프로세스 크기인 상황이지만 연속된 메모리 구조가 아니여서 메모리가 낭비됨

- 요약
  - 고정된 크기로 메모리 미리 분할
  - 메모리 관리가 간편함
  - 시스템 자원이 낭비될수 있음(내부/외부 단편화)

#### Variable partition multiprogramming

- 초기에는 전체가 하나의 영역
- 프로세스를 처리하는 과정에서 메로리 공간이 동적으로 분할
- 내부 단편화 문제가 없음
- 하지만 동적으로 메모리를 할당하고 메모리가 빠저나가면 빈 메모리 공간이 발생한다
- 빈 메로리에 새로운 프로세스를 할당하기 위한 전략이 필요하다

##### 배치전략

- 최초 적합 (First fit)
  - 충분한 크기를 가진 첫밴째 파티션을 선택
  - 공간활용도가 떨어짐
  - 오버헤드 적음
- 최적 적합 (best fit)
  - 프로세스가 들어갈 수 있는 파티션 중 가장 작은 곳 선택
  - 탐색시간이 오래걸림
  - 크기가 큰 파티션을 유지할 수 있음
  - 작은 크기의 파티션이 많이 발생
- 최악 적합 (worst fit)
  - 프로세스가 들어갈 수 있는 파티션 중 가장 큰 곳 선택
  - 탐색시간이 오래걸림
  - 작은 파티션발생을 줄일 수 있음
  - 큰 크기의 파티션 확보가 어려움
- 순차 최초 적합 (next fit)
  - 최조 적합 전략과 유사
  - state table에서 마지막으로 탐색한 위치부터 탐색
  - 메모리 영역의 사용 빈도 균등화
  - 오버헤드가 적음

##### 외부 단편화 문제

- 공간통합 - 인접한 빈 영역을 하나의 파티션으로 통합
  - 오버헤드가 적음
  - 프로세스가 메모리를 release하고 나가면 수행

- 메모리 압축 - 모든 빈 공간을 하나로 통합

  - 오버헤드가 큼
