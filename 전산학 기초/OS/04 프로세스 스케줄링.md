# 프로세스 스케줄링

## 다중 프로그래밍

- 여러개의 프로세스가 시스템 내 존재
- 자원을 할당 할 프로세스를 선택 해야함
  - 스케줄링
- 자원 관리
  - 시간 분할 관리
  - 공간 분할 관리

## 스케줄링의 목적

- 시스템 성능 향상
- 대표적 시스템 성능 지표
  - 응답시간
  - 작업 처리량
  - 자원 활용도
- 목적에 맞는 지표를 고려하여 스케줄링 기법을 선택

## 스케줄링 기준 및 단계

### 스케줄링 기준

- 스케줄링 기법이 고려하는 항목
  - 프로세스의 특성
  - 시스템 특성
  - 프로세서의 긴급성

### 스케줄링 단계

- 발생하는 빈도 및 할당 자원에 따른 구분
  - 장기 스케줄링
    - job 스케줄링 - 시스템(커널)에 제출할 job작업 결정
    - 다중 프로그래밍 정도 조절
    - 시분할 시스템에서는 불필요
  - 중기 스케줄링
    - 메모리 할당 결정 (suspended ready state)
  - 단기 스케줄링
    - ready -> running상태를 바꿔주는 역할
    - 가장 빈번하게 발생하므로 매우 빨라야함

## 스케줄링 정책

- 선점 vs 비선점
- 우선순위

### preemptive / non-preemptive 스케줄링 (선점 vs 비선점)

- 비선점
  - 할당 받을 자원을 스스로 반납할 때까지 사용
  - 장점
    - 컨텍스트 스위칭이 적음
  - 단점
    - 잦은 우선순위 역전, 평균 응답 시간 증가
- 선점
  - 타의에 의해 자원을 빼앗길 수 있음
  - 장점
    - 응답성이 증가
  - 단점
    - 컨텍스트 스위칭 오버헤드가 큼

### 우선순위

- 정적 우선순위
  - 프로세스 생성시 결정된 우선순위가 유지됨
  - 구현이 쉽고, 오버헤드가 적음
  - 시스템 환경 변화 대응이 어려움

- 동적 우선순위
  - 프로세스의 상태 변화에 따라 우선순위가 변경됨
  - 구현이 복잡, 우선순위 재계산 오버헤드가 큼
  - 시스템 변화에 유연한 대응 가능

## 기본 스케줄링 알고리즘들

### First come first service FCFS

- 스케줄링 기준
  - 도착 시간
  - 먼저 도착한 프로세스를 먼저 처리
- 자원을 효율적으로 사용가능 - 스케줄링 오버헤드가 적기 때문
- batch system에 적함
- 단점
  - 긴 평균 응답시간

### Round Robin RB

- 선점 스케줄링
- 스케줄링 기준

  - 도착 시간
  - 먼저 도착한 프로세스를 먼저 처리
- 자원 사용 제한 시간이 있음
  - 컨텍스트 스위치 오버헤드가 큼
  - 특정 프로세스의 자원 독점 방지
- 대화형 시분할 시스템에 적합
- 자원 사용 제한 시간 q에 따라 성능이 변화됨

### Shortest process next SPN

- 스케줄링 기준
  - 실행 시간이 가장 작은 프로세스를 먼저 처리
- 장점
  - 평균 대기 시간 최소화
  - 시스템 내 프로세스 수 최소화
    - 스케줄링 부하 감소, 메모리 절약
  - 많은 프로세스들에게 빠른 응답 시간 제공
- 단점
  - 무한대기 현상발생 starvation현상 - aging 등으로 해결
  - 정확한 실행시간을 알 수 없음
    - 실행 시간 예측 기법이 필요함

### Shortest remaining time next SRTN

- spn변형
- 선점형 스케줄링
- 장점
  - SPN장점 극대화
- 단점
  - 프로세스 생성시, 총 실행 시간을 예측이 필요함
  - 잔여 실해응ㄹ 계속 추적해야함
  - 컨텍스트 스위칭 오버헤드

### High Response Ratio Next HRRN

- spn 변형
- aging concept
  - 프로세스의 대기 시간을 고려하여 기회를 제공
- 스케줄링 기준
  - 응답률이 높은 프로세스 우선
    - 응답률 = (실행시간 + 대기시간) / 실행시간
  - SPN장점 + starvation방지
  - 실행시간 예측 부하

### Multi level queue MLQ

- 작업별 별도의 ready queue를 가짐
  - 최조 배정 된 큐를 벗어나지 못함
- queue사이에는 우선순위 기반의 스케줄링 사용
- 장점
  - 빠른 응답시간
- 단점
  - 여러 개의 queue관리 등 스케줄링 오버헤드
  - 우선순위가 낮은 queue는 starvation현상 발생

### Multi level Feedback queue MFQ

- 프로세스의 큐간 이동이 허용된 MLQ
- 피드백을 통해 우선순위 조정
- 프로세스에 대한 사전 정보없이 SPN, SPTN, HRRN기법의 효과를 볼 수 있음
- 단점
  - 설계 구현이 복잡
  - 스케줄링 오버헤드가 큼
  - startvation
- 변형
  - 각 준비 큐마다 시간 할당량을 다르게 배정
  - 입출력 위주 프로세스들을 상위 단계의 큐로 이동, 우선 순위 높임
  - 대기 시간이 짖어된 시간을 초과한 프로세스들을 사우이 큐로 이동





